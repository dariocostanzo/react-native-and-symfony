<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Symfony + React Native Integration</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        h1 {
            color: #2c3e50;
        }
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 25px;
            flex: 1;
            min-width: 300px;
            max-width: 500px;
        }
        .endpoint {
            background-color: #f8f9fa;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            overflow: auto;
        }
        .method {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
        }
        .get {
            background-color: #61affe;
            color: white;
        }
        pre {
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
        }
        .phone-container {
            position: relative;
            width: 300px;
            margin: 0 auto;
        }
        .phone-frame {
            width: 100%;
            height: auto;
            border: 12px solid #333;
            border-radius: 36px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .phone-screen {
            position: relative;
            background-color: white;
            border-radius: 24px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 500px;
        }
        .phone-header {
            background-color: #f8f8f8;
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        .product-list {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        .product-item {
            border-bottom: 1px solid #eee;
            padding: 10px;
            margin-bottom: 10px;
        }
        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .product-price {
            color: #e74c3c;
            font-weight: bold;
        }
        .product-description {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .refresh-button {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            margin-top: 20px;
            cursor: pointer;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            color: #7f8c8d;
        }
        .github-link {
            color: #3498db;
            text-decoration: none;
        }
        .github-link:hover {
            text-decoration: underline;
        }
        .product-selector {
            margin-top: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .product-selector select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background-color: white;
            flex-grow: 1;
        }
        .product-selector button {
            padding: 8px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .product-selector button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <header>
        <h1>Symfony + React Native Demo</h1>
        <p class="subtitle">A simple integration of a Symfony backend API with a React Native mobile app</p>
    </header>

    <div class="container">
        <div class="card">
            <h2>Symfony Backend</h2>
            <p>The backend is built with Symfony and provides REST API endpoints that serve product data.</p>
            
            <h3>Get All Products</h3>
            <div class="endpoint">
                <span class="method get">GET</span>
                <code>/api/products</code>
            </div>
            <pre><code id="products-response">Loading products data...</code></pre>
            
            <h3>Get Product by ID</h3>
            <div class="endpoint">
                <span class="method get">GET</span>
                <code>/api/products/{id}</code>
            </div>
            <div class="product-selector">
                <label for="product-id-selector">Select a product:</label>
                <select id="product-id-selector" aria-label="Product ID selector">
                    <option value="1">Product ID: 1 - Premium Smartphone</option>
                    <option value="2" selected>Product ID: 2 - Wireless Headphones</option>
                    <option value="3">Product ID: 3 - Smart Watch</option>
                </select>
                <button onclick="fetchProductById()">Fetch</button>
            </div>
            <pre><code id="product-response">Loading product data...</code></pre>
            
            <button class="refresh-button" onclick="fetchData()">Refresh Data</button>
        </div>
        
        <div class="card">
            <h2>React Native App</h2>
            <p>The mobile app is built with React Native and consumes the Symfony API.</p>
            
            <div class="phone-container">
                <div class="phone-frame">
                    <div class="phone-screen">
                        <div class="phone-header">
                            <h3 style="margin: 0;">Products</h3>
                        </div>
                        <div class="product-list" id="phone-products">
                            <div style="text-align: center; padding: 20px;">
                                Loading products...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>This is a demo of a Symfony backend + React Native app integration.</p>
        <p><a href="https://github.com/yourusername/react-native-and-symfony" class="github-link">View on GitHub</a></p>
    </footer>

    <script>
        // Function to fetch data from the Symfony backend
        async function fetchData() {
            try {
                // Update loading state
                document.getElementById('products-response').textContent = 'Loading...';
                document.getElementById('product-response').textContent = 'Loading...';
                document.getElementById('phone-products').innerHTML = '<div style="text-align: center; padding: 20px;">Loading products...</div>';
                
                // Use mock data for GitHub Pages demo
                const productsData = [
                    {
                        "id": 1,
                        "name": "Premium Smartphone",
                        "description": "High-end smartphone with advanced features",
                        "price": 899.99
                    },
                    {
                        "id": 2,
                        "name": "Wireless Headphones",
                        "description": "Noise-cancelling headphones with exceptional sound quality",
                        "price": 149.99
                    },
                    {
                        "id": 3,
                        "name": "Smart Watch",
                        "description": "Feature-rich smartwatch with health tracking capabilities",
                        "price": 299.99
                    }
                ];
                
                // Display products in the code block
                document.getElementById('products-response').textContent = JSON.stringify(productsData, null, 2);
                
                // Display products in the phone mockup
                let phoneProductsHtml = '';
                
                productsData.forEach(product => {
                    phoneProductsHtml += `
                        <div class="product-item">
                            <div class="product-name">${product.name}</div>
                            <div class="product-price">$${product.price.toFixed(2)}</div>
                            <div class="product-description">${product.description}</div>
                        </div>
                    `;
                });
                
                document.getElementById('phone-products').innerHTML = phoneProductsHtml || '<div style="text-align: center; padding: 20px;">No products found</div>';
                
                // Use product ID 2 for the initial display
                fetchProductById(2);
                
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('products-response').textContent = `Error: ${error.message}`;
                document.getElementById('product-response').textContent = `Error: ${error.message}`;
                document.getElementById('phone-products').innerHTML = `<div style="text-align: center; padding: 20px; color: red;">Error: ${error.message}</div>`;
            }
        }
        
        // Function to fetch a product by ID
        async function fetchProductById(forcedId) {
            try {
                document.getElementById('product-response').textContent = 'Loading...';
                
                const productId = forcedId || document.getElementById('product-id-selector').value;
                
                // Use mock data for GitHub Pages demo
                const productData = {
                    "product": {
                        "id": parseInt(productId),
                        "name": productId == 1 ? "Premium Smartphone" : 
                               (productId == 2 ? "Wireless Headphones" : "Smart Watch"),
                        "description": productId == 1 ? "High-end smartphone with advanced features" : 
                                      (productId == 2 ? "Noise-cancelling headphones with exceptional sound quality" : 
                                                      "Feature-rich smartwatch with health tracking capabilities"),
                        "price": productId == 1 ? 899.99 : (productId == 2 ? 149.99 : 299.99)
                    }
                };
                
                document.getElementById('product-response').textContent = JSON.stringify(productData, null, 2);
                
                // Highlight the selected product in the phone
                const productItems = document.querySelectorAll('.product-item');
                productItems.forEach(item => {
                    const nameElement = item.querySelector('.product-name');
                    if (nameElement && productData.product && nameElement.textContent === productData.product.name) {
                        item.style.backgroundColor = '#f0f8ff';
                        item.style.borderLeft = '3px solid #3498db';
                        item.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else {
                        item.style.backgroundColor = '';
                        item.style.borderLeft = '';
                    }
                });
                
            } catch (error) {
                console.error('Error fetching product by ID:', error);
                document.getElementById('product-response').textContent = `Error: ${error.message}`;
            }
        }
        
        // Update the onclick handler for the fetch button
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.product-selector button').onclick = function() {
                fetchProductById();
            };
            
            // Fetch data when the page loads
            fetchData();
        });
    </script>
</body>
</html>